/*
 * RTC.c
 *
 *  Created on: May 7, 2014
 *      Author: B46911
 */



#include "RTC.h"
/**********************************************************************************************
* External objects
**********************************************************************************************/


/**********************************************************************************************
* Global variables
**********************************************************************************************/


/**********************************************************************************************
* Constants and macros
**********************************************************************************************/


/**********************************************************************************************
* Local types
**********************************************************************************************/


/**********************************************************************************************
* Local function prototypes
*********************************************************************************************/


/**********************************************************************************************
* Local variables
**********************************************************************************************/


/**********************************************************************************************
* Local functions
**********************************************************************************************/


/**********************************************************************************************
* Global functions
**********************************************************************************************/

/***********************************************************************************************
*
* @brief    RTC_Init - Initialize RTC counter 
* @param    none
* @return   none
*
************************************************************************************************/
void RTC_Init()
{
	SIM_SCGC |=  SIM_SCGC_RTC_MASK;		/* Enable clock for RTC*/
	RTC_SC|=RTC_SC_RTCLKS(0b11);		/* Bus clock selected*/
	RTC_SC|=RTC_SC_RTCPS(0b111);		/* RTC prescaler of 1000, 20Mhz/1000=20 kHz, RTC counter increases every 50 us */
	RTC_SC|=RTC_SC_RTCO_MASK;			/* Enable RTCO output which toggles pin at every overflow of RTC counter*/
	SIM_PINSEL0|=SIM_PINSEL_RTCPS_MASK; /* RTCO in PTC5 */
	RTC_MOD = 10000;  					/* Interrupts every 10000*50 us = 500 ms*/
}


