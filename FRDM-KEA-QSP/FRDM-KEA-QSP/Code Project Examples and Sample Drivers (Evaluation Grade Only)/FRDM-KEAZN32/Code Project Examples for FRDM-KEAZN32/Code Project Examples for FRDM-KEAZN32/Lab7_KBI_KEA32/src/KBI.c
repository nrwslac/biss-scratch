/*
 * KBI.c
 *
 *  Created on: Sep 26, 2013
 *      Author: B55457
 */

#include "KBI.h"

/**********************************************************************************************
* External objects
**********************************************************************************************/


/**********************************************************************************************
* Global variables
**********************************************************************************************/


/**********************************************************************************************
* Constants and macros
**********************************************************************************************/


/**********************************************************************************************
* Local types
**********************************************************************************************/


/**********************************************************************************************
* Local function prototypes
*********************************************************************************************/


/**********************************************************************************************
* Local variables
**********************************************************************************************/


/**********************************************************************************************
* Local functions
**********************************************************************************************/


/**********************************************************************************************
* Global functions
**********************************************************************************************/


/***********************************************************************************************
*
* @brief    KBI_Init - Enable Keyboard interrupts on channels 0 and 1 (SW2 and SW3)
* @param    none
* @return   none
*
************************************************************************************************/  
void KBI_Init()
{
	
	SIM_SCGC |=  SIM_SCGC_KBI0_MASK; /* Enable bus clock on KBI0 */
	KBI0_SC = 0;					 /* Clearing mechanism */
	KBI0_ES |= KBI_ES_KBEDG(0x00);   /* Polarity setting, falling edge low level ,SW2 */
	KBI0_ES |= KBI_ES_KBEDG(0x00);   /* Polarity setting,falling edge low level,SW3 */
	KBI0_PE |= KBI_PE_KBIPE(0x01);   /* Enable KBI1 channel 4 , SW2 */
	KBI0_PE |= KBI_PE_KBIPE(0x02);   /* Enable KBI1 channel 5 , SW3 */
	KBI0_SC = 0;  				  	 /* Clearing flags*/
	KBI0_SC |= KBI_SC_KBIE_MASK;  	 /* Enable  KBI1 Interrupts */

}

